webpackJsonp([3],{"3C/1":function(t,e,a){a("M6a0"),a("zQR9"),a("+tPU"),a("qCoq"),a("UvrK"),a("Xjd4"),a("bqnK"),t.exports=a("FeBl").Map},"4WTo":function(t,e,a){var r=a("NWt+");t.exports=function(t,e){var a=[];return r(t,!1,a.push,a,e),a}},"5zde":function(t,e,a){a("zQR9"),a("qyJz"),t.exports=a("FeBl").Array.from},"7Doy":function(t,e,a){var r=a("EqjI"),i=a("7UMu"),o=a("dSzd")("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},"9Bbf":function(t,e,a){"use strict";var r=a("kM2E");t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},"9C8M":function(t,e,a){"use strict";var r=a("evD5").f,i=a("Yobk"),o=a("xH/j"),s=a("+ZMJ"),n=a("2KxR"),l=a("NWt+"),c=a("vIB/"),u=a("EGZi"),d=a("bRrM"),m=a("+E39"),f=a("06OY").fastKey,p=a("LIJb"),h=m?"_s":"size",v=function(t,e){var a,r=f(e);if("F"!==r)return t._i[r];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,c){var u=t(function(t,r){n(t,u,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[h]=0,void 0!=r&&l(r,a,t[c],t)});return o(u.prototype,{clear:function(){for(var t=p(this,e),a=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete a[r.i];t._f=t._l=void 0,t[h]=0},delete:function(t){var a=p(this,e),r=v(a,t);if(r){var i=r.n,o=r.p;delete a._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),a._f==r&&(a._f=i),a._l==r&&(a._l=o),a[h]--}return!!r},forEach:function(t){p(this,e);for(var a,r=s(t,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(r(a.v,a.k,this);a&&a.r;)a=a.p},has:function(t){return!!v(p(this,e),t)}}),m&&r(u.prototype,"size",{get:function(){return p(this,e)[h]}}),u},def:function(t,e,a){var r,i,o=v(t,e);return o?o.v=a:(t._l=o={i:i=f(e,!0),k:e,v:a,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[h]++,"F"!==i&&(t._i[i]=o)),t},getEntry:v,setStrong:function(t,e,a){c(t,e,function(t,a){this._t=p(t,e),this._k=a,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?u(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,u(1))},a?"entries":"values",!a,!0),d(e)}}},ALrJ:function(t,e,a){var r=a("+ZMJ"),i=a("MU5D"),o=a("sB3e"),s=a("QRG4"),n=a("oeOm");t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,u=4==t,d=6==t,m=5==t||d,f=e||n;return function(e,n,p){for(var h,v,g=o(e),_=i(g),y=r(n,p,3),b=s(_.length),T=0,S=a?f(e,b):l?f(e,0):void 0;b>T;T++)if((m||T in _)&&(v=y(h=_[T],T,g),t))if(a)S[T]=v;else if(v)switch(t){case 3:return!0;case 5:return h;case 6:return T;case 2:S.push(h)}else if(u)return!1;return d?-1:c||u?u:S}}},F2xs:function(t,e){},FfYs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("ifoU"),i=a.n(r),o=a("Gu7T"),s=a.n(o),n=a("goGF"),l=a("IFmi"),c={data:function(){return{form:{url:"",startTimes:""},info:{},isSel:this.$route.query.isSel,dialogTableVisible:!1,areaType:this.$route.query.areaType,modelId:this.$route.query.modelId,programId:this.$route.query.programId,currentPage:1,pageSize:10,totalNo:0,totalPage:0,isPopover:!0,isBroastStatus:"",isLoop:"",playStartEnd:"",eidtLayerList:[{id:"1",name:"置于顶层"},{id:"2",name:"向上一层"},{id:"3",name:"向下一层"},{id:"4",name:"置于底层"},{id:"5",name:"删除"}],addSel:"",searchVal:"",i_hour:"",i_minute:"",i_second:"",readonly:!1,liveBroadcast:"",listData:[],pickerBeginDateBefore:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}}}},mounted:function(){console.log("area",this.areaType),this.searchProgram()},methods:{searchList:function(){this.searchProgram()},searchProgram:function(){var t=this,e={groupId:this.$store.state.groupId,partion:this.areaType};Object(n.b)(e).then(function(e){200==e.data.code&&(console.log("-----",e),t.isTemplate=!0,t.info=e.data.data[0],t.playStartEnd=t.info.programStartTime,t.isLoop=Number(t.info.programType),
//!直播--起始时间、地址
1==t.info.programBroastStatus&&(t.form.url=t.info.programBroastUrl,t.form.startTimes=t.info.programBroastStartTime),t.getList(t.currentPage,t.pageSize))})},timeFormat:function(t){return Object(l.b)(t)},handleLiveBroadcast:function(){this.dialogTableVisible=!this.dialogTableVisible},liveSure:function(){return""==this.form.url||void 0===this.form.url?(this.$message.warning("请输入播放地址"),!1):""==this.form.startTimes||void 0===this.form.startTimes?(this.$message.warning("请输入播放起始时间"),!1):(this.dialogTableVisible=!1,void this.$message.success("操作成功"))},getBroadcastStop:function(){var t=this;this.$confirm("确认结束？").then(function(e){Object(n.d)(t.programId).then(function(e){200==e.data.code&&(t.form.url="",t.form.startTimes="",t.searchProgram())})}).catch(function(t){})},loadMore:function(){this.currentPage+=1,this.getList(this.currentPage,this.pageSize)},getList:function(t,e){var a=this;this.currentPage=t;var r={startTime:"",endTime:"",pageNum:t,pageSize:e,groupId:this.$store.state.groupId,modelId:this.modelId,partionId:this.areaType,title:this.searchVal};Object(n.c)(r).then(function(t){if(200==t.data.code){var e=t.data.data.programList;if(a.totalNo=t.data.data.programTotal,a.isSel){var r=JSON.parse(localStorage.getItem("addSelList"));e=a.unique([].concat(s()(e),s()(r)))}e.forEach(function(t){0!=t.materialType&&(null==t.programMaterialTotalTime||""==t.programMaterialTotalTime||void 0===t.programMaterialTotalTime?(t.hour="00",t.minute="00",t.second="00"):(t.hour=Object(l.b)(t.programMaterialTotalTime)[0],t.minute=Object(l.b)(t.programMaterialTotalTime)[1],t.second=Object(l.b)(t.programMaterialTotalTime)[2]))}),a.totalPage=Math.ceil(a.totalNo/a.pageSize),a.listData=e}else a.$message.error(t.msg)}).catch(function(t){console.log(t)})},unique:function(t){var e=new i.a;return t.filter(function(t){return!e.has(t.materialId)&&e.set(t.materialId,1)})},swapItems:function(t,e,a){var r="refNamePopover"+a;return this.$refs[r][0].doClose(),1==t?(this.listData.unshift(this.listData[e]),this.listData.splice(e+1,1),this.listData):4==t?(this.listData.push(this.listData[e]),this.listData.splice(e,1),this.listData):5==t?(this.itemRemove(e),!1):(2==t&&(this.listData[e]=this.listData.splice(e-1,1,this.listData[e])[0]),3==t&&(this.listData[e]=this.listData.splice(e+1,1,this.listData[e])[0]),this.$message.success("操作成功"),this.listData)},itemRemove:function(t){var e=this;this.$confirm("确认删除？").then(function(a){e.listData.splice(t,1)}).catch(function(t){})},gotoSel:function(){var t=this;if(""==this.isLoop&&0!=this.isLoop)return this.$message.warning("请选择播放方式"),!1;if(""==this.playStartEnd)return this.$message.warning("请选择播放起始时间"),!1;var e=/^([0-9]|[1-5][0-9]|60)$/,a=/^[0-9]*$/,r=!0,i=[];if(0==this.listData.length?i=[]:this.listData.forEach(function(t){0!=t.materialType?a.test(t.hour)&&e.test(t.minute)&&e.test(t.second)?r=!1:i.push({materialId:t.materialId,totalTime:Object(l.c)(t.hour,t.minute,t.second)}):i.push({materialId:t.materialId,totalTime:t.materialTotalTime})}),!r)return this.$message.error("请设置正确的播放时长"),!1;if(console.log("pass"),console.log("list",this.listData),console.log(i),0!=i.length){var o=0;if(i.forEach(function(t){o+=t.totalTime}),o>86400)return this.$message.error("视频+图片总播放时长不能超过24小时"),!1}var s={program:{modelId:Number(this.modelId),programBroadcast:"",programBroastStartTime:this.form.startTimes,programBroastStatus:"",programBroastUrl:this.form.url,programCreateTime:"",programGroupId:Number(this.$store.state.groupId),programId:Number(this.programId),programType:this.isLoop,programStartTime:this.playStartEnd,programUpdateTime:""},programMaterialList:i,programPartition:this.areaType};console.log(i),console.log(s),Object(n.e)(s).then(function(e){200==e.data.code&&t.$router.push({name:"programManage"})}).catch(function(e){console.log("error",e),t.$message.warning(e.data.data)})},goBack:function(){this.$router.push({name:"programManage"})},handleAddSel:function(t){this.$router.push({name:"addProgram",query:{type:t,programId:this.programId,modelId:this.$route.query.modelId,areaType:this.areaType}})}}},u={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrap"},[r("div",{staticClass:"manage_box"},[r("div",{staticClass:"block_title"},[r("el-row",{staticClass:"title_box",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("div",{staticClass:"title"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/programManage"}}},[t._v("节目管理")]),t._v(" "),r("el-breadcrumb-item",[t._v("编辑节目单")])],1)],1)]),t._v(" "),r("el-col",{attrs:{span:12,offset:6}},[r("div",{staticClass:"search"},[r("el-dropdown",[r("el-button",{attrs:{type:"primary",size:"medium"}},[t._v("\n                选择添加内容\n                "),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},["D"!=t.areaType?r("el-dropdown-item",{nativeOn:{click:function(e){return t.handleAddSel(1)}}},[t._v("添加视频")]):t._e(),t._v(" "),"D"!=t.areaType?r("el-dropdown-item",{nativeOn:{click:function(e){return t.handleAddSel(2)}}},[t._v("添加图片")]):t._e(),t._v(" "),"D"==t.areaType?r("el-dropdown-item",{nativeOn:{click:function(e){return t.handleAddSel(3)}}},[t._v("添加文字")]):t._e(),t._v(" "),"D"!=t.areaType&&1!=t.info.programBroastStatus?r("el-dropdown-item",{nativeOn:{click:function(e){return t.handleLiveBroadcast(e)}}},[t._v("插入直播")]):t._e()],1)],1),t._v(" "),r("el-input",{attrs:{placeholder:"请输入名称搜索","prefix-icon":"el-icon-search",clearable:""},on:{click:t.searchList},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)])],1),t._v(" "),r("el-row",[r("el-col",[r("div",{staticClass:"top_label"},[r("span",{staticClass:"label"},[t._v("播放形式")]),t._v(" "),r("el-radio-group",{model:{value:t.isLoop,callback:function(e){t.isLoop=e},expression:"isLoop"}},[r("el-radio",{attrs:{label:1}},[t._v("循环播放")]),t._v(" "),r("el-radio",{attrs:{label:0}},[t._v("不重复播放")])],1)],1)]),t._v(" "),r("el-col",[r("div",{staticClass:"top_label"},[r("span",{staticClass:"label"},[t._v("播放起始时间")]),t._v(" "),r("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:"请选择开始时间"},model:{value:t.playStartEnd,callback:function(e){t.playStartEnd=e},expression:"playStartEnd"}}),t._v(" "),t.form.startTimes?r("span",{staticStyle:{"margin-left":"20px","font-size":"14px"}},[t._v("直播播放起始时间："+t._s(t.form.startTimes))]):t._e(),t._v(" "),1==t.info.programBroastStatus?r("el-button",{attrs:{type:"primary"},on:{click:t.getBroadcastStop}},[t._v("结束直播")]):t._e()],1)])],1),t._v(" "),r("div",{staticClass:"row_box"},[t._l(t.listData,function(e,i){return r("dl",{key:i,staticClass:"dl flip-list-move"},[r("dt",[r("div",{staticClass:"img"},[0==e.materialType?r("img",{attrs:{src:a("Uc3U"),alt:""}}):t._e(),t._v(" "),1==e.materialType?r("img",{attrs:{src:e.materialUrl,alt:""}}):t._e(),t._v(" "),2==e.materialType?r("img",{attrs:{src:a("NGR+"),alt:""}}):t._e()]),t._v(" "),r("div",{staticClass:"text"},[r("p",{staticClass:"play_title"},[0!=e.materialType?r("span",{staticClass:"text"},[t._v("设置播放时长：")]):t._e(),t._v(" "),r("el-popover",{ref:"refNamePopover"+e.materialId,refInFor:!0,attrs:{placement:"left",trigger:"click"}},[t.listData?r("ul",{staticClass:"layer_box"},t._l(t.eidtLayerList,function(a,o){return r("li",{key:o,on:{click:function(r){return t.swapItems(a.id,i,e.materialId)}}},[r("span",{class:{box_hidden:0==i&&0==o||0==i&&1==o,box_hidden1:i==t.listData.length-1&&2==o||i==t.listData.length-1&&3==o}},[t._v(t._s(a.name))])])}),0):t._e(),t._v(" "),r("span",{staticClass:"setting el-icon-setting",attrs:{slot:"reference"},slot:"reference"})])],1),t._v(" "),0!=e.materialType?r("div",{staticClass:"play_times"},[r("el-input",{attrs:{placeholder:"时"},model:{value:e.hour,callback:function(a){t.$set(e,"hour",a)},expression:"item.hour"}}),t._v(":\n                "),r("el-input",{attrs:{placeholder:"分"},model:{value:e.minute,callback:function(a){t.$set(e,"minute",a)},expression:"item.minute"}}),t._v(":\n                "),r("el-input",{attrs:{placeholder:"秒"},model:{value:e.second,callback:function(a){t.$set(e,"second",a)},expression:"item.second"}})],1):t._e()])]),t._v(" "),r("dd",{staticClass:"total_times"},[r("span",{staticClass:"a_title"},[t._v(t._s(e.materialTitle))]),t._v(" "),0==e.materialType?r("span",[t._v("总时长："+t._s(t.timeFormat(e.materialTotalTime)[0])+"时"+t._s(t.timeFormat(e.materialTotalTime)[1])+"分"+t._s(t.timeFormat(e.materialTotalTime)[2])+"秒")]):t._e()]),t._v(" "),r("dd",{staticClass:"dd"},[t._v("\n            "+t._s(e.materialBrief)+"\n            ")])])}),t._v(" "),0==t.listData.length?r("div",{staticClass:"no_list"},[r("img",{attrs:{src:a("ohjH"),alt:""}})]):t._e()],2)],1),t._v(" "),t.currentPage<t.totalPage?r("div",{staticClass:"load_more",on:{click:t.loadMore}},[t._v("\n      点击加载更多\n    ")]):t._e(),t._v(" "),r("div",{staticClass:"bottom_btn"},[r("el-button",{attrs:{type:"primary"},on:{click:t.gotoSel}},[t._v("完成")]),t._v(" "),r("el-button",{staticClass:"cancle",attrs:{type:"default"},on:{click:t.goBack}},[t._v("取消")])],1)]),t._v(" "),r("el-dialog",{attrs:{title:"插入直播",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[r("el-form",{ref:"form1",attrs:{model:t.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"直播链接"}},[r("el-input",{attrs:{placeholder:"请输入直播链接"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"播放起始时间"}},[r("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"请输入播放起始时间"},model:{value:t.form.startTimes,callback:function(e){t.$set(t.form,"startTimes",e)},expression:"form.startTimes"}})],1),t._v(" "),r("div",{staticClass:"bottom_btn",staticStyle:{"text-align":"center"}},[r("el-button",{nativeOn:{click:function(e){return t.handleLiveBroadcast(e)}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.liveSure}},[t._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("F2xs")},"data-v-06015112",null);e.default=d.exports},Gu7T:function(t,e,a){"use strict";e.__esModule=!0;var r,i=a("c/Tr"),o=(r=i)&&r.__esModule?r:{default:r};e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,o.default)(t)}},HpRW:function(t,e,a){"use strict";var r=a("kM2E"),i=a("lOnJ"),o=a("+ZMJ"),s=a("NWt+");t.exports=function(t){r(r.S,t,{from:function(t){var e,a,r,n,l=arguments[1];return i(this),(e=void 0!==l)&&i(l),void 0==t?new this:(a=[],e?(r=0,n=o(l,arguments[2],2),s(t,!1,function(t){a.push(n(t,r++))})):s(t,!1,a.push,a),new this(a))}})}},LIJb:function(t,e,a){var r=a("EqjI");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},UvrK:function(t,e,a){var r=a("kM2E");r(r.P+r.R,"Map",{toJSON:a("m9gC")("Map")})},Xjd4:function(t,e,a){a("9Bbf")("Map")},bqnK:function(t,e,a){a("HpRW")("Map")},"c/Tr":function(t,e,a){t.exports={default:a("5zde"),__esModule:!0}},fBQ2:function(t,e,a){"use strict";var r=a("evD5"),i=a("X8DO");t.exports=function(t,e,a){e in t?r.f(t,e,i(0,a)):t[e]=a}},ifoU:function(t,e,a){t.exports={default:a("3C/1"),__esModule:!0}},m9gC:function(t,e,a){var r=a("RY/4"),i=a("4WTo");t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},oeOm:function(t,e,a){var r=a("7Doy");t.exports=function(t,e){return new(r(t))(e)}},qCoq:function(t,e,a){"use strict";var r=a("9C8M"),i=a("LIJb");t.exports=a("qo66")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},qo66:function(t,e,a){"use strict";var r=a("7KvD"),i=a("kM2E"),o=a("06OY"),s=a("S82l"),n=a("hJx8"),l=a("xH/j"),c=a("NWt+"),u=a("2KxR"),d=a("EqjI"),m=a("e6n0"),f=a("evD5").f,p=a("ALrJ")(0),h=a("+E39");t.exports=function(t,e,a,v,g,_){var y=r[t],b=y,T=g?"set":"add",S=b&&b.prototype,x={};return h&&"function"==typeof b&&(_||S.forEach&&!s(function(){(new b).entries().next()}))?(b=e(function(e,a){u(e,b,t,"_c"),e._c=new y,void 0!=a&&c(a,g,e[T],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in S&&(!_||"clear"!=t)&&n(b.prototype,t,function(a,r){if(u(this,b,t),!e&&_&&!d(a))return"get"==t&&void 0;var i=this._c[t](0===a?0:a,r);return e?this:i})}),_||f(b.prototype,"size",{get:function(){return this._c.size}})):(b=v.getConstructor(e,t,g,T),l(b.prototype,a),o.NEED=!0),m(b,t),x[t]=b,i(i.G+i.W+i.F,x),_||v.setStrong(b,t,g),b}},qyJz:function(t,e,a){"use strict";var r=a("+ZMJ"),i=a("kM2E"),o=a("sB3e"),s=a("msXi"),n=a("Mhyx"),l=a("QRG4"),c=a("fBQ2"),u=a("3fs2");i(i.S+i.F*!a("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,i,d,m=o(t),f="function"==typeof this?this:Array,p=arguments.length,h=p>1?arguments[1]:void 0,v=void 0!==h,g=0,_=u(m);if(v&&(h=r(h,p>2?arguments[2]:void 0,2)),void 0==_||f==Array&&n(_))for(a=new f(e=l(m.length));e>g;g++)c(a,g,v?h(m[g],g):m[g]);else for(d=_.call(m),a=new f;!(i=d.next()).done;g++)c(a,g,v?s(d,h,[i.value,g],!0):i.value);return a.length=g,a}})}});
//# sourceMappingURL=3.480401e04755a9980836.js.map