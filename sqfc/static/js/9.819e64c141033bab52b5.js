webpackJsonp([9],{mfEo:function(e,t){},qNPd:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("xEBi"),s=r("9TcC"),a={data:function(){return{screenHeight:""+document.documentElement.clientHeight-242,form:{},rules:{websiteNumber:[{required:!0,message:"请输入站点编号",trigger:"blur"}],websiteDeviceNumber:[{required:!0,message:"请输入设备编号",trigger:"blur"}],websiteOwnerName:[{required:!0,message:"请输入业主姓名",trigger:"blur"}],websiteOwnerIdCard:[{required:!0,message:"请输入身份证号码",trigger:"blur"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证",trigger:"blur"},{min:15,max:18,message:"请输入正确的身份证",trigger:"blur"}],websiteOwnerPhone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1(3|4|5|6|7|8)\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],websiteSalesName:[{required:!0,message:"请输入销售员姓名",trigger:"blur"}],websiteGroupId:[{required:!0,message:"请选择分组",trigger:"blur"}],websiteManegementType:[{required:!0,message:"请选择经营方式",trigger:"blur"}],websiteAddress:[{required:!0,message:"请输入地址",trigger:"blur"}],websiteManageName:[{required:!0,message:"请输入管理员",trigger:"blur"}]},groups:[],types:[{id:"1",label:"专营"},{id:"2",label:"双机"},{id:"3",label:"兼营"}],type:"",groupId:this.$store.state.groupId,isVisible:!1,visibleTitle:"新建",searchVal:"",currentPage:1,pageSize:10,totalNo:0,selectionList:[],tableData:[],loading:!0}},computed:{ids:function(){var e=[];return this.selectionList.forEach(function(t){e.push(t.websiteId)}),e.join(",")}},mounted:function(){var e=this;window.onresize=function(){e.screenHeight=""+document.documentElement.clientHeight-242},e.getList(1)},methods:{formatType:function(e,t){return 1==e.websiteManegementType?"专营":2==e.websiteManegementType?"双机":"兼营"},formatGroup:function(e){if(0!=this.groups.length)return this.groups[e.$index].group.groupName},visibleBefore:function(e){},getPrev:function(e){this.getList(e)},getNext:function(e){this.getList(e)},handleCurrentChange:function(e){this.getList(e)},searchList:function(){this.getList(1)},getGroup:function(){var e=this;Object(s.d)({name:""}).then(function(t){200==t.data.code&&(e.groups=t.data.data)})},getList:function(e){var t=this;this.currentPage=e;var r={groupId:this.groupId,pageNum:this.currentPage,pageSize:this.pageSize,websiteNumber:this.searchVal};Object(i.f)(r).then(function(e){"200"==e.data.code&&(t.totalNo=e.data.data.total,t.tableData=e.data.data.websiteList,t.getGroup(),t.loading=!1)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(r){if(!r)return console.log("error submit!!"),!1;var s;1==t.type||(s={websiteAddress:t.form.websiteAddress,websiteDeviceNumber:t.form.websiteDeviceNumber,websiteGroupId:t.form.websiteGroupId,websiteManageName:t.form.websiteManageName,websiteManegementType:t.form.websiteManegementType,websiteNumber:t.form.websiteNumber,websiteOwnerIdCard:t.form.websiteOwnerIdCard,websiteOwnerName:t.form.websiteOwnerName,websiteOwnerPhone:t.form.websiteOwnerPhone,websiteSalesName:t.form.websiteSalesName},Object(i.b)(s).then(function(r){200==r.data.code&&(t.$message.success("添加成功"),t.$refs[e].resetFields(),t.getList(1),t.isVisible=!1)}))})},showVisible:function(e){e?(this.type=1,this.visibleTitle="编辑",console.log(e),this.form=e):(this.type=2,this.visibleTitle="新增",this.form={}),this.isVisible=!0},handleSelectionChange:function(e){this.selectionList=e},rewDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.c)(e).then(function(e){200==e.data.code&&(t.$message({type:"success",message:"操作成功!"}),t.getList(1))})}).catch(function(e){console.log("取消")})},rowAllDel:function(){var e=this;0!=this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.d)(e.ids).then(function(t){200==t.data.code&&(e.$message.success("删除成功"),e.getList(1))})}).catch(function(e){console.log("取消")}):this.$message.warning("请选择至少一条数据")},handleExport:function(){this.$confirm("确认要导出数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("确认下载")}).catch(function(){console.log("取消下载")})}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrap"},[r("div",{staticClass:"table_box"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showVisible()}}},[e._v("新建站点")]),e._v(" "),r("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-delete"},on:{click:e.rowAllDel}},[e._v("删除")])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"可输入站点编号",clearable:""},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchList},slot:"append"})],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.screenHeight,"element-loading-text":"正在努力加载中..."},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"",prop:"websiteNumber",label:"站点编号",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"websiteOwnerName",label:"业主姓名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"websiteDeviceNumber",label:"设备编号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"websiteAddress",label:"地址"}}),e._v(" "),r("el-table-column",{attrs:{prop:"groupName",label:"分组"}}),e._v(" "),r("el-table-column",{attrs:{prop:"websiteManegementType",label:"经营方式",formatter:e.formatType}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticStyle:{color:"#f00"},attrs:{type:"text",size:"small"},nativeOn:{click:function(r){return r.preventDefault(),e.rewDel(t.row.websiteId)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,jumper","page-size":e.pageSize,total:e.totalNo},on:{"prev-click":e.getPrev,"next-click":e.getNext,"current-change":e.handleCurrentChange}}),e._v(" "),r("el-drawer",{staticClass:"visibleClass",staticStyle:{"overflow-y":"scroll"},attrs:{title:e.visibleTitle,visible:e.isVisible,"before-close":e.visibleBefore("form"),direction:"rtl",size:"50%"},on:{"update:visible":function(t){e.isVisible=t}}},[r("el-form",{ref:"form",staticClass:"formclass",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"设备编号",prop:"websiteDeviceNumber"}},[r("el-input",{attrs:{type:"text"},model:{value:e.form.websiteDeviceNumber,callback:function(t){e.$set(e.form,"websiteDeviceNumber",t)},expression:"form.websiteDeviceNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"站点编号",prop:"websiteNumber"}},[r("el-input",{attrs:{type:"text"},model:{value:e.form.websiteNumber,callback:function(t){e.$set(e.form,"websiteNumber",t)},expression:"form.websiteNumber"}})],1),e._v(" "),r("div",{staticClass:"group_title"},[e._v("业主信息")]),e._v(" "),r("el-form-item",{attrs:{label:"姓名",prop:"websiteOwnerName"}},[r("el-input",{model:{value:e.form.websiteOwnerName,callback:function(t){e.$set(e.form,"websiteOwnerName",t)},expression:"form.websiteOwnerName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"身份证号",prop:"websiteOwnerIdCard"}},[r("el-input",{model:{value:e.form.websiteOwnerIdCard,callback:function(t){e.$set(e.form,"websiteOwnerIdCard",t)},expression:"form.websiteOwnerIdCard"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"websiteOwnerPhone"}},[r("el-input",{model:{value:e.form.websiteOwnerPhone,callback:function(t){e.$set(e.form,"websiteOwnerPhone",t)},expression:"form.websiteOwnerPhone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"销售员姓名",prop:"websiteSalesName"}},[r("el-input",{model:{value:e.form.websiteSalesName,callback:function(t){e.$set(e.form,"websiteSalesName",t)},expression:"form.websiteSalesName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"分组",prop:"websiteGroupId"}},[1!=e.groups.length&&0!=e.groups.length?r("el-radio-group",{model:{value:e.form.websiteGroupId,callback:function(t){e.$set(e.form,"websiteGroupId",t)},expression:"form.websiteGroupId"}},e._l(e.groups,function(t){return r("el-radio",{directives:[{name:"show",rawName:"v-show",value:999!=t.group.groupId,expression:"item.group.groupId!=999"}],key:t.group.groupId,attrs:{label:t.group.groupId}},[e._v(e._s(t.group.groupName))])}),1):r("div",{staticClass:"tips"},[e._v("请前往个人中心添加分组")])],1),e._v(" "),r("el-form-item",{attrs:{label:"经营方式",prop:"websiteManegementType"}},[r("el-radio-group",{model:{value:e.form.websiteManegementType,callback:function(t){e.$set(e.form,"websiteManegementType",t)},expression:"form.websiteManegementType"}},e._l(e.types,function(t){return r("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"地址",prop:"websiteAddress"}},[r("el-input",{model:{value:e.form.websiteAddress,callback:function(t){e.$set(e.form,"websiteAddress",t)},expression:"form.websiteAddress"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"管理员",prop:"websiteManageName"}},[r("el-input",{model:{value:e.form.websiteManageName,callback:function(t){e.$set(e.form,"websiteManageName",t)},expression:"form.websiteManageName"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确定")])],1)],1)],1)],1)])},staticRenderFns:[]};var o=r("VU/8")(a,n,!1,function(e){r("mfEo")},"data-v-0d4cd4c9",null);t.default=o.exports},xEBi:function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"d",function(){return l}),r.d(t,"f",function(){return u}),r.d(t,"a",function(){return c}),r.d(t,"e",function(){return m}),r.d(t,"g",function(){return b});var i=r("Dd8w"),s=r.n(i),a=r("Y8t/"),n=function(e){return Object(a.a)({url:"/sqfc/website/addWebsite",method:"post",data:e})},o=function(e){return Object(a.a)({url:"/sqfc/website/deleteWebsite",method:"get",params:{websiteId:e}})},l=function(e){return Object(a.a)({url:"/sqfc/website/deleteWebsiteByIds",method:"get",params:{websiteIds:e}})},u=function(e){return Object(a.a)({url:"/sqfc/website/queryWebsite",method:"get",params:s()({},e)})},c=function(e){return Object(a.a)({url:"/sqfc/website/addDialog",method:"post",data:e})},m=function(){return Object(a.a)({url:"/sqfc/website/queryDialog",method:"get",data:{}})},b=function(e){return Object(a.a)({url:"/sqfc/website/updateDialog",method:"post",params:{dialogId:e}})}}});
//# sourceMappingURL=9.819e64c141033bab52b5.js.map