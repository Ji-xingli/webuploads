{"version":3,"sources":["webpack:///src/pages/personalCenter/edit.vue","webpack:///./src/pages/personalCenter/edit.vue?ba39","webpack:///./src/pages/personalCenter/edit.vue"],"names":["edit","data","fileList","file","fileDevice","fileDeviceList","picMasterVisible","groupList","delList","mygroup","searchVal","form","rules","userName","required","message","trigger","userPhone","pattern","userPassword","userDeviceVersion","mounted","this","getInfo","getGroup","methods","_this","Object","personalCenter","then","res","code","url","userLogoUrl","changePack","submitPicForm","formName","_this2","$refs","validate","valid","console","log","$message","type","formData","FormData","append","raw","$router","push","name","err","_this3","odata","$store","commit","length","searchGroup","addGroup","_this4","warning","inputBlur","obj","_this5","groupId","groupName","delGroup","id","_this6","$confirm","r","catch","handlePicRemove","beforePicUpload","imgType","split","imgSize","size","indexOf","splice","beforeDeviceUpload","userDeviceUrl","handleDeviceRemove","beforeCloseDrawer","editCancle","flg","save","_this7","personalCenter_edit","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","separator-class","to","path","_v","ref","model","label-width","label","action","auto-upload","limit","list-type","file-list","accept","on-change","on-remove","prop","value","callback","$$v","$set","expression","on","click","_s","staticStyle","font-size","placeholder","slot","icon","nativeOn","$event","clearable","_l","item","index","key","group","blur","total","readonly","_e","title","visible","direction","before-close","wrapperClosable","update:visible","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.7beadbac632c776117cf.js","sourcesContent":["<template>\r\n  <div class=\"wrap\">\r\n    <div class=\"table_box\">\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/personalCenter' }\"\r\n          >个人信息</el-breadcrumb-item\r\n        >\r\n        <el-breadcrumb-item>修改个人信息</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n      <el-form\r\n        ref=\"form\"\r\n        class=\"formclass\"\r\n        :model=\"form\"\r\n        :rules=\"rules\"\r\n        label-width=\"120px\"\r\n      >\r\n        <el-form-item label=\"我的头像\">\r\n          <el-upload\r\n            class=\"headPic headImg\"\r\n            action=\"api/blade-project/project/projectfiles/uploadFiles\"\r\n            :auto-upload=\"false\"\r\n            :limit=\"1\"\r\n            list-type=\"picture-card\"\r\n            :file-list=\"fileList\"\r\n            accept=\".jpg,.png,.jpeg,JPG,JPEG\"\r\n            :on-change=\"beforePicUpload\"\r\n            :on-remove=\"handlePicRemove\"\r\n          >\r\n            <!-- v-model=\"form.userLogoUrl\"\r\n             :show-file-list=\"false\"\r\n            :file-list=\"dialogImageUrlArray\" -->\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"用户名\" prop=\"userName\">\r\n          <el-input v-model=\"form.userName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号\" prop=\"userPhone\">\r\n          <el-input v-model=\"form.userPhone\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"当前密码\" prop=\"userPassword\">\r\n          <el-input v-model=\"form.userPassword\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"设备软件包\" prop=\"userDeviceVersion\">\r\n          <div @click=\"changePack\">\r\n            <span>{{ form.userDeviceVersion }}</span>\r\n            <span class=\"el-icon-s-goods\" style=\"font-size: 20px\"></span>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item label=\"我的分组\">\r\n          <div class=\"mygroup\">\r\n            <el-input\r\n              placeholder=\"请输入需要添加的分组\"\r\n              v-model=\"mygroup\"\r\n              class=\"input-with-select\"\r\n            >\r\n              <el-button\r\n                slot=\"append\"\r\n                @click.native=\"addGroup\"\r\n                icon=\"el-icon-plus\"\r\n              ></el-button>\r\n            </el-input>\r\n            <el-input\r\n              placeholder=\"可输入分组进行搜索\"\r\n              v-model=\"searchVal\"\r\n              class=\"input-with-select\"\r\n              clearable\r\n            >\r\n              <el-button\r\n                @click=\"searchGroup\"\r\n                slot=\"append\"\r\n                icon=\"el-icon-search\"\r\n              ></el-button>\r\n            </el-input>\r\n          </div>\r\n          <div class=\"groupList\">\r\n            <div class=\"item\" v-for=\"(item, index) in groupList\" :key=\"index\">\r\n              <el-input\r\n                v-model=\"item.group.groupName\"\r\n                @blur=\"inputBlur(item.group)\"\r\n                v-if=\"item.group.groupId!=999\"\r\n              >\r\n                <template slot=\"append\">({{ item.total }})</template>\r\n              </el-input>\r\n              <el-input\r\n                v-model=\"item.group.groupName\"\r\n                readonly=\"readonly\"\r\n                v-else\r\n              >\r\n                <template slot=\"append\">({{ item.total }})</template>\r\n              </el-input>\r\n              <span\r\n                class=\"del el-icon-remove\"\r\n                @click=\"delGroup(item.group.groupId)\"\r\n                v-if=\"item.group.groupId!=999\"\r\n              ></span>\r\n            </div>\r\n          </div>\r\n          <el-form-item>\r\n            <el-button @click=\"editCancle(2)\">取消</el-button>\r\n            <el-button type=\"primary\" @click=\"submitPicForm('form')\"\r\n              >确定</el-button\r\n            >\r\n          </el-form-item>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!-- 设备软件包弹窗 -->\r\n      <el-drawer\r\n        title=\"上传软件包\"\r\n        :visible.sync=\"picMasterVisible\"\r\n        direction=\"rtl\"\r\n        :before-close=\"beforeCloseDrawer\"\r\n        :wrapperClosable=\"false\"\r\n        size=\"50%\"\r\n      >\r\n        <el-form\r\n          ref=\"form_device\"\r\n          class=\"formclass deviceClass\"\r\n          :model=\"form\"\r\n          :rules=\"rules\"\r\n          label-width=\"120px\"\r\n        >\r\n          <el-form-item label=\"软件版本号\" prop=\"userDeviceVersion\">\r\n            <el-input v-model=\"form.userDeviceVersion\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"选择软件包\" prop=\"userDeviceUrl\">\r\n            <el-upload\r\n              class=\"headPic\"\r\n              action=\"sqfc/user/updateDevice\"\r\n              :auto-upload=\"false\"\r\n              :limit=\"1\"\r\n              :file-list=\"fileDeviceList\"\r\n              :on-change=\"beforeDeviceUpload\"\r\n              :on-remove=\"handleDeviceRemove\"\r\n            >\r\n              <!-- :file-list=\"fileDeviceList\" -->\r\n              <!-- <i class=\"el-icon-plus\"></i> -->\r\n              <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button @click=\"editCancle(1)\">取消</el-button>\r\n            <el-button type=\"primary\" @click=\"save('form_device')\"\r\n              >保存</el-button\r\n            >\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-drawer>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  addGroup,\r\n  queryGroup,\r\n  updateGroup,\r\n  deleteGroup,\r\n  getUserInfo, //个人中心信息\r\n  userInfoUpdate, //信息更新\r\n  updateDevice, //更新上传软件包\r\n} from \"@/api/personalCenter/index.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      fileList: [], //头像回显\r\n      file: {}, //上传头像的文件\r\n      fileDevice: {}, //上传设备的文件\r\n      fileDeviceList: [], //设备软件包回显\r\n      picMasterVisible: false, //是否编辑\r\n      groupList: [],\r\n      delList: [], //删除的组列表\r\n      mygroup: \"\", //添加的分组名称\r\n      searchVal: \"\", //搜索分组\r\n      form: {},\r\n      rules: {\r\n        userName: [{ required: true, message: \"请输入姓名\", trigger: \"blur\" }],\r\n\r\n        userPhone: [\r\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\r\n          // { validator: idcard, trigger: 'blur' },\r\n          {\r\n            pattern: /^1(3|4|5|6|7|8)\\d{9}$/,\r\n            message: \"请输入正确的手机号\",\r\n            trigger: \"blur\",\r\n          },\r\n          // { max:11, message: '请输入11位手机号码', trigger: 'blur' }\r\n        ],\r\n        userPassword: [\r\n          { required: true, message: \"请输入姓名\", trigger: \"blur\" },\r\n        ],\r\n        userDeviceVersion: [\r\n          { required: true, message: \"请输入软件版本号\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    // 获取用户信息\r\n    this.getInfo();\r\n    // 获取组信息\r\n    this.getGroup();\r\n  },\r\n  methods: {\r\n    getInfo() {\r\n      // 获取用户信息\r\n      getUserInfo().then((res) => {\r\n        if (res.data.code == \"200\") {\r\n          this.form = res.data.data;\r\n          //头像回显\r\n          this.fileList = [{ url: this.form.userLogoUrl }];\r\n          // this.fileDeviceList = [\r\n          //   {\r\n          //     name: \"软件包\" + this.form.userDeviceVersion,\r\n          //     url: this.form.userDeviceUrl,\r\n          //   },\r\n          // ];\r\n        }\r\n      });\r\n    },\r\n    changePack() {\r\n      this.picMasterVisible = true;\r\n    },\r\n    submitPicForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          console.log(this.form.userLogoUrl);\r\n          if (this.form.userLogoUrl == \"\") {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"请选择头像!\",\r\n            });\r\n            return false;\r\n          }\r\n\r\n          // 更新提交\r\n          let formData = new FormData(); //  用FormData存放上传文件\r\n          if (this.file) {\r\n            formData.append(\"file\", this.file.raw);\r\n          } else {\r\n            formData.append(\"file\", this.form.userLogoUrl);\r\n          }\r\n          // 版本\r\n          formData.append(\"userDeviceVersion\", this.form.userDeviceVersion);\r\n          formData.append(\"userName\", this.form.userName);\r\n          formData.append(\"userPassword\", this.form.userPassword);\r\n          formData.append(\"userPhone\", this.form.userPhone);\r\n          userInfoUpdate(formData).then(\r\n            (res) => {\r\n              if (res.data.code == 200) {\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"保存成功!\",\r\n                });\r\n                // 跳转到个人中心\r\n                this.$router.push({\r\n                  name: \"personalCenter\",\r\n                });\r\n              }\r\n            },\r\n            (err) => {\r\n              this.$message({\r\n                type: \"error\",\r\n                message: \"操作失败!\",\r\n              });\r\n            }\r\n          );\r\n        }\r\n      });\r\n    },\r\n    getGroup() {\r\n      // 获取组列表\r\n      var odata = {\r\n        name: this.searchVal,\r\n      };\r\n      queryGroup(odata).then((res) => {\r\n        if (res.data.code == 200) {\r\n          this.groupList = res.data.data;\r\n          this.$store.commit(\"setGroupLen\", res.data.data.length);\r\n        }\r\n      });\r\n    },\r\n    searchGroup() {\r\n      // 组查询\r\n      this.getGroup();\r\n    },\r\n    addGroup() {\r\n      if (this.mygroup) {\r\n        addGroup(this.mygroup).then((res) => {\r\n          if (res.data.code == 200) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"操作成功!\",\r\n            });\r\n            this.mygroup = \"\";\r\n            //! 添加或删除、修改后默认总组- 默认选择总组\r\n            this.$store.commit(\"setGroupId\", 999);\r\n            this.getGroup();\r\n\r\n          }\r\n        });\r\n      } else {\r\n        this.$message.warning(\"请输入需要添加的分组\");\r\n      }\r\n\r\n      console.log(this.groupList);\r\n    },\r\n    inputBlur(obj) {\r\n      // input 失去焦点保存\r\n      var odata = {\r\n        groupId: obj.groupId,\r\n        name: obj.groupName,\r\n      };\r\n      updateGroup(odata).then((res) => {\r\n        if (res.data.code == \"200\") {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"修改成功!\",\r\n          });\r\n          this.getGroup();\r\n          //! 添加或删除、修改后默认总组- 默认选择总组\r\n          this.$store.commit(\"setGroupId\", 999);\r\n        }\r\n      });\r\n    },\r\n    delGroup(id) {\r\n      // 删除分组\r\n      // this.delList.push(this.groupList[index]);\r\n      // this.groupList.splice(index, 1);\r\n\r\n      // this.mygroupId = \"\";\r\n      this.$confirm(\"删除分组后，分组中的所有站点也将删除！确认删除？\")\r\n        .then((res) => {\r\n          deleteGroup(id).then((r) => {\r\n            if (r.data.code == \"200\") {\r\n              this.$message({\r\n                type: \"success\",\r\n                message: \"删除成功!\",\r\n              });\r\n              //! 添加或删除、修改后默认总组- 默认选择总组\r\n              this.$store.commit(\"setGroupId\", 999);\r\n              this.getGroup();\r\n            }\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          //   console.log(err)\r\n        });\r\n    },\r\n    handlePicRemove() {\r\n      // 头像删除\r\n      this.form.userLogoUrl = \"\";\r\n      this.file = {};\r\n    },\r\n    beforePicUpload(file, fileList) {\r\n      const IMG_ALLOWD = [\"jpeg\", \"jpg\", \"gif\", \"png\"];\r\n      const imgType = file.raw.type.split(\"/\")[1];\r\n      const imgSize = file.size / 1024 / 1024;\r\n      if (IMG_ALLOWD.indexOf(imgType) === -1) {\r\n        this.$message.warning(\"上传图片格式错误\");\r\n        //不匹配不展示\r\n        fileList.splice(-1, 1);\r\n        return false;\r\n      } else if (imgSize >= 400) {\r\n        // 判断图片大小\r\n        this.$message.warning(\"图片大小大于5M\");\r\n        //不匹配不展示\r\n        fileList.splice(-1, 1);\r\n        return false;\r\n      } else {\r\n        console.log(\"file\", file);\r\n        this.form.userLogoUrl = file.url;\r\n        this.file = file;\r\n        console.log(file);\r\n        return true;\r\n      }\r\n    },\r\n    beforeDeviceUpload(file, fileList) {\r\n      this.form.userDeviceUrl = file.url;\r\n      this.fileDevice = file;\r\n      console.log(this.fileDevice);\r\n      return true;\r\n    },\r\n    handleDeviceRemove() {\r\n      // 软件包删除\r\n      this.form.userDeviceUrl = \"\";\r\n      this.fileDevice = {};\r\n      \r\n    },\r\n    beforeCloseDrawer(){\r\n      // 软件包删除\r\n        this.form.userDeviceUrl = \"\";\r\n        this.fileDevice = {};\r\n        this.picMasterVisible = false;\r\n        this.fileDeviceList=[]\r\n    },\r\n    editCancle(flg) {\r\n      // 取消保存\r\n      if (flg == 1) {\r\n        \r\n        \r\n        this.picMasterVisible = false;\r\n        // 软件包删除\r\n        this.form.userDeviceUrl = \"\";\r\n        this.fileDevice = {};\r\n        this.fileDeviceList=[]\r\n\r\n\r\n      } else {\r\n        this.$router.push({\r\n          name: \"personalCenter\",\r\n        });\r\n      }\r\n    },\r\n    save(formName) {\r\n      //设备软件包--保存\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          if (this.form.userDeviceUrl == \"\") {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: \"请上传设备软件包!\",\r\n            });\r\n            return false;\r\n          }\r\n\r\n          let formData = new FormData(); //  用FormData存放上传文件\r\n          if (this.fileDevice) {\r\n            formData.append(\"file\", this.fileDevice.raw);\r\n          } else {\r\n            formData.append(\"file\", this.form.userDeviceUrl);\r\n          }\r\n          // 版本\r\n          formData.append(\"userDeviceVersion\", this.form.userDeviceVersion);\r\n          formData.append(\"userName\", this.form.userName);\r\n          formData.append(\"userPassword\", this.form.userPassword);\r\n          formData.append(\"userPhone\", this.form.userPhone);\r\n          updateDevice(formData)\r\n            .then((res) => {\r\n              if (res.data.code == 200) {\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"更新成功!\",\r\n                });\r\n                //刷新个人信息\r\n                this.getInfo();\r\n                // 隐藏弹窗\r\n                this.picMasterVisible = false;\r\n\r\n                // 软件包删除\r\n                this.form.userDeviceUrl = \"\";\r\n                this.fileDevice = {};\r\n\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              this.$message({\r\n                type: \"error\",\r\n                message: \"操作失败!\",\r\n              });\r\n            });\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.el-breadcrumb {\r\n  height: 40px;\r\n  line-height: 30px;\r\n  font-size: 14px;\r\n}\r\n.wrap {\r\n  width: 100%;\r\n  height: 100%;\r\n  margin-top: 10px;\r\n  background: #fff;\r\n  overflow-y: scroll;\r\n  .headImg {\r\n    width: 500px;\r\n    // height:1rem;\r\n    img {\r\n      width: 148px;\r\n      height: 148px;\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n    }\r\n  }\r\n  .oImg {\r\n    width: 148px;\r\n    height: 148px;\r\n  }\r\n  .deviceClass {\r\n    /deep/.el-upload-list__item-name {\r\n      width: 200px;\r\n    }\r\n  }\r\n  .table_box {\r\n    padding: 10px;\r\n    .title {\r\n      font-size: 18px;\r\n      line-height: 40px;\r\n    }\r\n    .input-with-select {\r\n      width: 230px;\r\n    }\r\n    .head_pic {\r\n      width: 100px;\r\n      height: 100px;\r\n    }\r\n    .groupList {\r\n      margin: 10px 0 10px;\r\n      .item {\r\n        display: inline-block;\r\n        padding: 0 10px 0 0;\r\n        line-height: 40px;\r\n        width: 200px;\r\n        margin: 0 20px 10px 0;\r\n        position: relative;\r\n        .del {\r\n          font-size: 20px;\r\n          color: #f00;\r\n          position: absolute;\r\n          right: -10px;\r\n          top: 10px;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .group_title {\r\n    line-height: 40px !important;\r\n    padding: 0 10px;\r\n    font-size: 18px;\r\n    color: #666;\r\n    background: #098;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/personalCenter/edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"table_box\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/personalCenter' }}},[_vm._v(\"个人信息\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"修改个人信息\")])],1),_vm._v(\" \"),_c('el-form',{ref:\"form\",staticClass:\"formclass\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"我的头像\"}},[_c('el-upload',{staticClass:\"headPic headImg\",attrs:{\"action\":\"api/blade-project/project/projectfiles/uploadFiles\",\"auto-upload\":false,\"limit\":1,\"list-type\":\"picture-card\",\"file-list\":_vm.fileList,\"accept\":\".jpg,.png,.jpeg,JPG,JPEG\",\"on-change\":_vm.beforePicUpload,\"on-remove\":_vm.handlePicRemove}},[_c('i',{staticClass:\"el-icon-plus\"})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"userName\"}},[_c('el-input',{model:{value:(_vm.form.userName),callback:function ($$v) {_vm.$set(_vm.form, \"userName\", $$v)},expression:\"form.userName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"手机号\",\"prop\":\"userPhone\"}},[_c('el-input',{model:{value:(_vm.form.userPhone),callback:function ($$v) {_vm.$set(_vm.form, \"userPhone\", $$v)},expression:\"form.userPhone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"当前密码\",\"prop\":\"userPassword\"}},[_c('el-input',{model:{value:(_vm.form.userPassword),callback:function ($$v) {_vm.$set(_vm.form, \"userPassword\", $$v)},expression:\"form.userPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"设备软件包\",\"prop\":\"userDeviceVersion\"}},[_c('div',{on:{\"click\":_vm.changePack}},[_c('span',[_vm._v(_vm._s(_vm.form.userDeviceVersion))]),_vm._v(\" \"),_c('span',{staticClass:\"el-icon-s-goods\",staticStyle:{\"font-size\":\"20px\"}})])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"我的分组\"}},[_c('div',{staticClass:\"mygroup\"},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入需要添加的分组\"},model:{value:(_vm.mygroup),callback:function ($$v) {_vm.mygroup=$$v},expression:\"mygroup\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-plus\"},nativeOn:{\"click\":function($event){return _vm.addGroup($event)}},slot:\"append\"})],1),_vm._v(\" \"),_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"可输入分组进行搜索\",\"clearable\":\"\"},model:{value:(_vm.searchVal),callback:function ($$v) {_vm.searchVal=$$v},expression:\"searchVal\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.searchGroup},slot:\"append\"})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"groupList\"},_vm._l((_vm.groupList),function(item,index){return _c('div',{key:index,staticClass:\"item\"},[(item.group.groupId!=999)?_c('el-input',{on:{\"blur\":function($event){return _vm.inputBlur(item.group)}},model:{value:(item.group.groupName),callback:function ($$v) {_vm.$set(item.group, \"groupName\", $$v)},expression:\"item.group.groupName\"}},[_c('template',{slot:\"append\"},[_vm._v(\"(\"+_vm._s(item.total)+\")\")])],2):_c('el-input',{attrs:{\"readonly\":\"readonly\"},model:{value:(item.group.groupName),callback:function ($$v) {_vm.$set(item.group, \"groupName\", $$v)},expression:\"item.group.groupName\"}},[_c('template',{slot:\"append\"},[_vm._v(\"(\"+_vm._s(item.total)+\")\")])],2),_vm._v(\" \"),(item.group.groupId!=999)?_c('span',{staticClass:\"del el-icon-remove\",on:{\"click\":function($event){return _vm.delGroup(item.group.groupId)}}}):_vm._e()],1)}),0),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":function($event){return _vm.editCancle(2)}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitPicForm('form')}}},[_vm._v(\"确定\")])],1)],1)],1),_vm._v(\" \"),_c('el-drawer',{attrs:{\"title\":\"上传软件包\",\"visible\":_vm.picMasterVisible,\"direction\":\"rtl\",\"before-close\":_vm.beforeCloseDrawer,\"wrapperClosable\":false,\"size\":\"50%\"},on:{\"update:visible\":function($event){_vm.picMasterVisible=$event}}},[_c('el-form',{ref:\"form_device\",staticClass:\"formclass deviceClass\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"软件版本号\",\"prop\":\"userDeviceVersion\"}},[_c('el-input',{model:{value:(_vm.form.userDeviceVersion),callback:function ($$v) {_vm.$set(_vm.form, \"userDeviceVersion\", $$v)},expression:\"form.userDeviceVersion\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"选择软件包\",\"prop\":\"userDeviceUrl\"}},[_c('el-upload',{staticClass:\"headPic\",attrs:{\"action\":\"sqfc/user/updateDevice\",\"auto-upload\":false,\"limit\":1,\"file-list\":_vm.fileDeviceList,\"on-change\":_vm.beforeDeviceUpload,\"on-remove\":_vm.handleDeviceRemove}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":function($event){return _vm.editCancle(1)}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.save('form_device')}}},[_vm._v(\"保存\")])],1)],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7d254f45\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/personalCenter/edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7d254f45\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7d254f45\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7d254f45\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/personalCenter/edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}